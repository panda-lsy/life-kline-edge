# äººç”Ÿ K çº¿ - Life K-line Edge Application

> ç»“åˆä¼ ç»Ÿå…«å­—å‘½ç†ä¸ç°ä»£ K çº¿å›¾åˆ†æçš„äººç”Ÿå¯è§†åŒ–åº”ç”¨

**æœ¬é¡¹ç›®ç”±[é˜¿é‡Œäº‘ESA](https://www.aliyun.com/product/esa)æä¾›åŠ é€Ÿã€è®¡ç®—å’Œä¿æŠ¤**![img](https://img.alicdn.com/imgextra/i3/O1CN01H1UU3i1Cti9lYtFrs_!!6000000000139-2-tps-7534-844.png)


[![CI](https://github.com/yourusername/life-kline-edge/actions/workflows/ci.yml/badge.svg)](https://github.com/yourusername/life-kline-edge/actions/workflows/ci.yml)
[![Deploy](https://github.com/yourusername/life-kline-edge/actions/workflows/deploy.yml/badge.svg)](https://github.com/yourusername/life-kline-edge/actions/workflows/deploy.yml)

## ğŸ“– é¡¹ç›®ç®€ä»‹

äººç”Ÿ K çº¿æ˜¯ä¸€ä¸ªåˆ›æ–°çš„è¾¹ç¼˜åº”ç”¨,å°†ä¸­å›½ä¼ ç»Ÿå…«å­—å‘½ç†ä¸é‡‘è K çº¿å›¾å¯è§†åŒ–ç›¸ç»“åˆ,ä¸ºç”¨æˆ·æä¾›ç‹¬ç‰¹çš„äººç”Ÿè¿åŠ¿åˆ†æè§†è§’ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **å…«å­—æ’ç›˜åˆ†æ**: åŸºäºå†œå†å’Œç”Ÿè¾°å…«å­—çš„å®Œæ•´å‘½ç†è®¡ç®—
- ğŸ“Š **K çº¿å›¾å¯è§†åŒ–**: ä½¿ç”¨ Recharts ç»˜åˆ¶äº¤äº’å¼äººç”Ÿè¿åŠ¿ K çº¿å›¾
- ğŸ¨ **å¤šä¸»é¢˜æ”¯æŒ**: ä¸­å›½é£ã€èµ›åšæœ‹å…‹ã€æç®€ä¸‰ç§ä¸»é¢˜é£æ ¼
- ğŸ“± **å“åº”å¼è®¾è®¡**: å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ“œ **å†å²è®°å½•ç®¡ç†**: æœ¬åœ°å­˜å‚¨æŸ¥è¯¢å†å²,æ”¯æŒå¯¹æ¯”åˆ†æ
- ğŸ“¤ **å¤šæ ¼å¼å¯¼å‡º**: æ”¯æŒåˆ†äº«å¡ç‰‡ã€PDF å¯¼å‡º
- ğŸš€ **è¾¹ç¼˜è®¡ç®—**: åŸºäº ESA Pages çš„è¾¹ç¼˜å‡½æ•°å’Œ CDN åŠ é€Ÿ
- âš¡ **æ€§èƒ½ä¼˜åŒ–**: ä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ã€éª¨æ¶å±ã€å›¾ç‰‡ä¼˜åŒ–

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æ¡†æ¶

- **React 19.2** - UI æ¡†æ¶
- **TypeScript 5.9** - ç±»å‹å®‰å…¨
- **Vite 7.2** - æ„å»ºå·¥å…·

### æ ¸å¿ƒåº“

- **React Router 7.12** - è·¯ç”±ç®¡ç†
- **Recharts 3.6** - å›¾è¡¨å¯è§†åŒ–
- **Zustand 5.0** - çŠ¶æ€ç®¡ç†
- **React Hook Form 7.70** - è¡¨å•ç®¡ç†
- **Zod 4.3** - æ•°æ®éªŒè¯
- **Tailwind CSS 3.4** - æ ·å¼æ¡†æ¶
- **Lucide React** - å›¾æ ‡åº“

### å‘½ç†è®¡ç®—

- **lunar-javascript 1.7** - å†œå†å’Œå…«å­—è®¡ç®—åº“

### åŠŸèƒ½å·¥å…·

- **html2canvas** - æˆªå›¾ç”Ÿæˆ
- **jsPDF 4.0** - PDF å¯¼å‡º
- **DOMPurify** - XSS é˜²æŠ¤

### æ€§èƒ½ä¼˜åŒ–

- **vite-plugin-imagemin** - å›¾ç‰‡ä¼˜åŒ–
- **React.lazy + Suspense** - ä»£ç åˆ†å‰²
- **IntersectionObserver** - æ‡’åŠ è½½
- **Skeleton éª¨æ¶å±** - åŠ è½½ä½“éªŒ

## ğŸ“¦ å®‰è£…ä¸è¿è¡Œ

### ç¯å¢ƒè¦æ±‚

- Node.js >= 20
- npm >= 10

### æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/life-kline-edge.git
cd life-kline-edge

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev

# æ‰“å¼€æµè§ˆå™¨è®¿é—®
# http://localhost:5173
```

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
# ç±»å‹æ£€æŸ¥å’Œæ„å»º
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

## ğŸš€ éƒ¨ç½²æŒ‡å—

### GitHub Pages / ESA Pages éƒ¨ç½²

é¡¹ç›®å·²é…ç½® GitHub Actions è‡ªåŠ¨éƒ¨ç½²æµç¨‹:

#### 1. å‡†å¤‡å·¥ä½œ

```bash
# åˆå§‹åŒ– Git ä»“åº“ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
git init
git add .
git commit -m "Initial commit"

# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add origin https://github.com/yourusername/life-kline-edge.git

# æ¨é€åˆ° GitHub
git branch -M main
git push -u origin main
```

#### 2. é…ç½® GitHub Pages

1. è¿›å…¥ GitHub ä»“åº“è®¾ç½®
2. å¯¼èˆªåˆ° **Settings** â†’ **Pages**
3. åœ¨ **Build and deployment** é…ç½®:
   - **Source**: GitHub Actions
4. ä¿å­˜è®¾ç½®

#### 3. å¯ç”¨ Actions

1. å¯¼èˆªåˆ° **Actions** æ ‡ç­¾é¡µ
2. å¯ç”¨ GitHub Actionsï¼ˆå¦‚æœé¦–æ¬¡ä½¿ç”¨ï¼‰
3. **Deploy to ESA Pages** å·¥ä½œæµä¼šåœ¨æ¯æ¬¡ push åˆ° `main` åˆ†æ”¯æ—¶è‡ªåŠ¨è§¦å‘

#### 4. éƒ¨ç½²æµç¨‹

GitHub Actions ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤:

```yaml
1. æ£€å‡ºä»£ç 
2. è®¾ç½® Node.js ç¯å¢ƒ (v20)
3. å®‰è£…ä¾èµ– (npm ci)
4. ç±»å‹æ£€æŸ¥ (tsc -b)
5. æ„å»ºé¡¹ç›® (npm run build)
6. ä¸Šä¼ æ„å»ºäº§ç‰©
7. éƒ¨ç½²åˆ° GitHub Pages
```

#### 5. éƒ¨ç½²æˆåŠŸå

- ğŸŒ è®¿é—®: `https://yourusername.github.io/life-kline-edge/`
- â±ï¸ é€šå¸¸éœ€è¦ 1-3 åˆ†é’Ÿå®Œæˆéƒ¨ç½²

### æ‰‹åŠ¨éƒ¨ç½²åˆ° ESA Pages

å¦‚æœéœ€è¦éƒ¨ç½²åˆ°é˜¿é‡Œäº‘ ESA Pages:

#### 1. å‡†å¤‡æ„å»ºäº§ç‰©

```bash
# æ„å»ºé¡¹ç›®
npm run build

# æ„å»ºäº§ç‰©åœ¨ dist/ ç›®å½•
```

#### 2. é…ç½® ESA Pages

1. ç™»å½• [ESA Pages æ§åˆ¶å°](https://esa-pages.console.aliyun.com/)
2. åˆ›å»ºæ–°ç«™ç‚¹æˆ–é€‰æ‹©ç°æœ‰ç«™ç‚¹
3. é…ç½®æ„å»ºè®¾ç½®:
   - **æ„å»ºå‘½ä»¤**: `npm run build`
   - **è¾“å‡ºç›®å½•**: `dist`
   - **ç¯å¢ƒå˜é‡**:
     - `NODE_ENV=production`
4. è¿æ¥ GitHub ä»“åº“
5. å¯ç”¨è‡ªåŠ¨éƒ¨ç½²

#### 3. ç¯å¢ƒå˜é‡é…ç½®

åœ¨ ESA Pages æ§åˆ¶å°é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼ˆå¦‚éœ€è¦ï¼‰:

```bash
# API é…ç½®ï¼ˆå¦‚æœä½¿ç”¨è¾¹ç¼˜å‡½æ•°ï¼‰
VITE_API_BASE_URL=https://your-api.example.com
```

âš ï¸ **é‡è¦**: ä¸è¦åœ¨å‰ç«¯ä»£ç ä¸­æš´éœ²æ•æ„Ÿä¿¡æ¯!

### è¾¹ç¼˜å‡½æ•°éƒ¨ç½²ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦éƒ¨ç½²è¾¹ç¼˜å‡½æ•°:

#### 1. åˆ›å»ºè¾¹ç¼˜å‡½æ•°ç›®å½•

```bash
mkdir -p api/functions
```

#### 2. ç¼–å†™è¾¹ç¼˜å‡½æ•°

```javascript
// api/functions/klineAnalysis.js
export default async function handler(request) {
  // å¤„ç† API è¯·æ±‚
  return new Response(JSON.stringify({ data: '...' }), {
    headers: { 'Content-Type': 'application/json' }
  });
}
```

#### 3. é…ç½®è·¯ç”±

åœ¨ `api/routes.json`:

```json
{
  "routes": [
    {
      "pattern": "/api/*",
      "handler": "functions/*.js"
    }
  ]
}
```

#### 4. éƒ¨ç½²

```bash
# ä½¿ç”¨ ESA CLI
esa deploy
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
life-kline-edge/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/          # GitHub Actions å·¥ä½œæµ
â”‚       â”œâ”€â”€ deploy.yml      # éƒ¨ç½²å·¥ä½œæµ
â”‚       â””â”€â”€ ci.yml          # CI å·¥ä½œæµ
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Layout/        # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ ThemeSwitcher/ # ä¸»é¢˜åˆ‡æ¢
â”‚   â”‚   â”œâ”€â”€ Form/          # è¡¨å•ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ KLineChart/    # K çº¿å›¾
â”‚   â”‚   â”œâ”€â”€ ShareCard/     # åˆ†äº«å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ Toast/         # é€šçŸ¥ç³»ç»Ÿ
â”‚   â”‚   â”œâ”€â”€ ErrorBoundary/ # é”™è¯¯è¾¹ç•Œ
â”‚   â”‚   â”œâ”€â”€ Skeleton/      # éª¨æ¶å±
â”‚   â”‚   â””â”€â”€ OptimizedImage/# å›¾ç‰‡ä¼˜åŒ–
â”‚   â”œâ”€â”€ pages/             # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ HomePage.tsx
â”‚   â”‚   â”œâ”€â”€ InputPage.tsx
â”‚   â”‚   â”œâ”€â”€ ResultPage.tsx
â”‚   â”‚   â””â”€â”€ HistoryPage.tsx
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ baziService.ts
â”‚   â”‚   â”œâ”€â”€ klineService.ts
â”‚   â”‚   â”œâ”€â”€ historyService.ts
â”‚   â”‚   â””â”€â”€ exportService.ts
â”‚   â”œâ”€â”€ router/            # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ lib/               # å·¥å…·åº“
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ main.tsx           # åº”ç”¨å…¥å£
â”œâ”€â”€ .spec-workflow/        # Spec å·¥ä½œæµé…ç½®
â”œâ”€â”€ index.html
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ tsconfig.json
â””â”€â”€ package.json
```

## ğŸ¨ ä¸»é¢˜é…ç½®

é¡¹ç›®æ”¯æŒä¸‰ç§ä¸»é¢˜é£æ ¼:

- **ä¸­å›½é£** (chinese): ä¼ ç»Ÿçº¢è‰²å’Œé‡‘è‰²ä¸»é¢˜
- **èµ›åšæœ‹å…‹** (cyberpunk): éœ“è™¹ç´«è‰²å’Œè“è‰²ä¸»é¢˜
- **æç®€** (minimal): ç®€çº¦é»‘ç™½ç°ä¸»é¢˜

ä¸»é¢˜é…ç½®ä½äº `src/styles/themes.css`ã€‚

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°é¡µé¢

1. åœ¨ `src/pages/` åˆ›å»ºæ–°ç»„ä»¶
2. åœ¨ `src/router/index.tsx` æ·»åŠ è·¯ç”±
3. åœ¨å¯¼èˆªæ æ·»åŠ é“¾æ¥

### æ·»åŠ æ–°ä¸»é¢˜

1. åœ¨ `src/styles/themes.css` å®šä¹‰ CSS å˜é‡
2. åœ¨ `src/components/ThemeSwitcher/ThemeSwitcher.tsx` æ·»åŠ ä¸»é¢˜é€‰é¡¹

### æ·»åŠ æ–°ç»„ä»¶

ä½¿ç”¨é¡¹ç›®æä¾›çš„ç»„ä»¶æ¨¡æ¿:

```typescript
// src/components/YourComponent/index.tsx
import type { ReactNode } from 'react';

export interface YourComponentProps {
  children?: ReactNode;
}

export function YourComponent({ children }: YourComponentProps) {
  return <div>{children}</div>;
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

é¡¹ç›®å·²å®æ–½å¤šé¡¹æ€§èƒ½ä¼˜åŒ–:

- âœ… **ä»£ç åˆ†å‰²**: React.lazy() æŒ‰è·¯ç”±åˆ†å‰²
- âœ… **å›¾ç‰‡ä¼˜åŒ–**: vite-plugin-imagemin è‡ªåŠ¨å‹ç¼©
- âœ… **æ‡’åŠ è½½**: IntersectionObserver å®ç°å›¾ç‰‡æ‡’åŠ è½½
- âœ… **éª¨æ¶å±**: Skeleton ç»„ä»¶æå‡åŠ è½½ä½“éªŒ
- âœ… **ç¼“å­˜ç­–ç•¥**: Service Worker å¾…é…ç½®
- âœ… **æ„å»ºä¼˜åŒ–**: Manual chunks åˆ†åŒ…ç­–ç•¥

### æ€§èƒ½ç›®æ ‡

- FCP (First Contentful Paint) < 2s
- LCP (Largest Contentful Paint) < 2.5s
- TTI (Time to Interactive) < 3s
- Lighthouse Score > 90

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œ ESLint
npm run lint

# ç±»å‹æ£€æŸ¥
npx tsc -b

# æ„å»º
npm run build
```

## ğŸ“ License

MIT License

## ğŸ‘¨â€ğŸ’» ä½œè€…

æ·±å±±æœ‰å¯†æ— å›¢é˜Ÿ

## ğŸ™ è‡´è°¢

- [lunar-javascript](https://github.com/6tail/lunar-javascript) - å†œå†å’Œå…«å­—è®¡ç®—åº“
- [Recharts](https://recharts.org/) - React å›¾è¡¨åº“
- [Vite](https://vitejs.dev/) - ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·
- [ESA Pages](https://www.aliyun.com/product/esa-pages) - é˜¿é‡Œäº‘è¾¹ç¼˜é¡µé¢æœåŠ¡

---

**é˜¿é‡Œäº‘ ESA Pages è¾¹ç¼˜å¼€å‘ç«èµ›å‚èµ›ä½œå“**
